# Generated by Django 4.2.13 on 2025-11-15 11:17

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('lecturer', '0002_initial'),
        ('admin_hierarchy', '0004_alter_devicetoken_token'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
        ('student', '0006_studentsemesterfolder_gpa_totalscore'),
    ]

    operations = [
        migrations.CreateModel(
            name='AcademicCalendar',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=20, unique=True)),
                ('status', models.CharField(choices=[('planning', 'Planning'), ('active', 'Active'), ('completed', 'Completed')], default='planning', max_length=20)),
                ('year_start_date', models.DateField()),
                ('year_end_date', models.DateField()),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='AcademicProbation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('probation_start_date', models.DateTimeField()),
                ('probation_end_date', models.DateTimeField(blank=True, null=True)),
                ('reason', models.CharField(choices=[('low_gpa', 'Low GPA'), ('failing_courses', 'Failing Courses'), ('attendance', 'Poor Attendance'), ('other', 'Other')], max_length=20)),
                ('minimum_required_gpa', models.DecimalField(decimal_places=2, max_digits=3)),
                ('is_active', models.BooleanField(default=True)),
                ('dismissed_date', models.DateTimeField(blank=True, null=True)),
                ('student', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='academic_probation', to='student.student')),
            ],
            options={
                'verbose_name_plural': 'Academic Probations',
            },
        ),
        migrations.CreateModel(
            name='APIIntegration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField()),
                ('endpoint_url', models.URLField()),
                ('api_key', models.CharField(blank=True, max_length=500)),
                ('integration_type', models.CharField(choices=[('hris', 'HRIS System'), ('finance', 'Finance System'), ('portal', 'Portal'), ('communication', 'Communication'), ('other', 'Other')], max_length=20)),
                ('is_active', models.BooleanField(default=True)),
                ('last_sync', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='CourseOffering',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=20)),
                ('semester', models.CharField(max_length=10)),
                ('max_students', models.IntegerField(default=100)),
                ('enrolled_students', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=True)),
                ('class_location', models.CharField(blank=True, max_length=100)),
                ('class_days', models.CharField(blank=True, max_length=100)),
                ('class_time', models.TimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('lecturer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='course_offerings', to='lecturer.lecturer')),
                ('module', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='offerings', to='student.module')),
            ],
            options={
                'unique_together': {('module', 'lecturer', 'academic_year', 'semester')},
            },
        ),
        migrations.CreateModel(
            name='DataValidationRule',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('rule_name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField()),
                ('rule_type', models.CharField(choices=[('score_range', 'Score Range'), ('gpa_range', 'GPA Range'), ('attendance_percent', 'Attendance Percentage'), ('unique_constraint', 'Unique Constraint')], max_length=20)),
                ('min_value', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('max_value', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='GradingScale',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('scale_type', models.CharField(choices=[('4.0', '4.0 Scale (US)'), ('5.0', '5.0 Scale (European)'), ('percentage', 'Percentage (0-100)'), ('custom', 'Custom Scale')], max_length=20)),
                ('description', models.TextField(blank=True)),
                ('grade_mapping', models.JSONField(default=dict)),
                ('is_default', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='NotificationTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('template_type', models.CharField(choices=[('result_published', 'Result Published'), ('result_pending', 'Result Pending Approval'), ('grade_warning', 'Grade Warning'), ('assignment_deadline', 'Assignment Deadline'), ('exam_scheduled', 'Exam Scheduled'), ('academic_probation', 'Academic Probation Notice'), ('graduation_eligible', 'Graduation Eligible')], max_length=30, unique=True)),
                ('subject', models.CharField(max_length=200)),
                ('body', models.TextField()),
                ('variables', models.JSONField(default=list)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
        ),
        migrations.CreateModel(
            name='ProgramCurriculum',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('version', models.IntegerField(default=1)),
                ('academic_year_introduced', models.CharField(max_length=20)),
                ('total_credits', models.IntegerField()),
                ('total_courses', models.IntegerField()),
                ('description', models.TextField(blank=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='curriculums', to='student.program')),
            ],
            options={
                'unique_together': {('program', 'version')},
            },
        ),
        migrations.CreateModel(
            name='ProgramRequirement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('total_credits_required', models.IntegerField()),
                ('minimum_gpa', models.DecimalField(decimal_places=2, default=2.0, max_digits=3)),
                ('description', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('elective_courses', models.ManyToManyField(blank=True, related_name='elective_in_programs', to='student.module')),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='requirements', to='student.program')),
                ('required_courses', models.ManyToManyField(blank=True, related_name='required_in_programs', to='student.module')),
            ],
        ),
        migrations.CreateModel(
            name='ResultSubmissionDeadline',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('result_type', models.CharField(choices=[('exam', 'Exam Results'), ('test', 'Test Results'), ('assignment', 'Assignment Results'), ('attendance', 'Attendance'), ('presentation', 'Presentation')], max_length=20)),
                ('semester', models.CharField(max_length=20)),
                ('academic_year', models.CharField(max_length=20)),
                ('deadline_date', models.DateTimeField(help_text='Last date for result submission')),
                ('final_extension_date', models.DateTimeField(blank=True, help_text='Extended deadline (optional)', null=True)),
                ('notification_date', models.DateTimeField(blank=True, help_text='When to send deadline reminder', null=True)),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('notes', models.TextField(blank=True, help_text='Deadline notes/instructions')),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='result_deadlines', to='student.program')),
            ],
            options={
                'ordering': ['-deadline_date'],
                'unique_together': {('program', 'result_type', 'semester', 'academic_year')},
            },
        ),
        migrations.CreateModel(
            name='WebhookConfiguration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('event_type', models.CharField(choices=[('result_published', 'Result Published'), ('grade_changed', 'Grade Changed'), ('student_enrolled', 'Student Enrolled'), ('transcript_requested', 'Transcript Requested')], max_length=30)),
                ('webhook_url', models.URLField()),
                ('is_active', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'unique_together': {('event_type', 'webhook_url')},
            },
        ),
        migrations.CreateModel(
            name='TranscriptRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('purpose', models.CharField(blank=True, max_length=200)),
                ('recipient', models.CharField(blank=True, max_length=200)),
                ('request_date', models.DateTimeField(auto_now_add=True)),
                ('required_by_date', models.DateField(blank=True, null=True)),
                ('status', models.CharField(choices=[('pending', 'Pending'), ('processing', 'Processing'), ('ready', 'Ready'), ('collected', 'Collected')], default='pending', max_length=20)),
                ('notes', models.TextField(blank=True)),
                ('processed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transcript_requests', to='student.student')),
            ],
            options={
                'ordering': ['-request_date'],
            },
        ),
        migrations.CreateModel(
            name='Transcript',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('transcript_type', models.CharField(choices=[('official', 'Official Transcript'), ('informal', 'Informal Transcript'), ('digital', 'Digital Transcript')], max_length=20)),
                ('include_courses', models.BooleanField(default=True)),
                ('include_gpa', models.BooleanField(default=True)),
                ('include_dates', models.BooleanField(default=True)),
                ('start_academic_year', models.CharField(blank=True, max_length=20)),
                ('end_academic_year', models.CharField(blank=True, max_length=20)),
                ('pdf_file', models.FileField(blank=True, null=True, upload_to='transcripts/')),
                ('is_signed', models.BooleanField(default=False)),
                ('signed_date', models.DateTimeField(blank=True, null=True)),
                ('digital_signature', models.CharField(blank=True, max_length=500)),
                ('requested_date', models.DateTimeField(auto_now_add=True)),
                ('generated_date', models.DateTimeField(blank=True, null=True)),
                ('request_status', models.CharField(choices=[('pending', 'Pending'), ('approved', 'Approved'), ('rejected', 'Rejected')], default='pending', max_length=20)),
                ('number_of_copies', models.IntegerField(default=1)),
                ('signed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='signed_transcripts', to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='transcripts', to='student.student')),
            ],
            options={
                'ordering': ['-requested_date'],
            },
        ),
        migrations.CreateModel(
            name='SubmissionStatusNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_type', models.CharField(choices=[('deadline_reminder', 'Deadline Reminder'), ('submission_open', 'Submission Window Open'), ('deadline_approaching', 'Deadline Approaching'), ('deadline_passed', 'Deadline Passed'), ('submission_closed', 'Submission Closed')], max_length=30)),
                ('recipient_group', models.CharField(choices=[('all_lecturers', 'All Lecturers'), ('lecturers_no_submission', 'Lecturers with No Submissions'), ('all_students', 'All Students'), ('all_deans', 'All Deans'), ('all_hods', 'All HODs'), ('all_exam_officers', 'All Exam Officers')], max_length=30)),
                ('subject', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('scheduled_send_time', models.DateTimeField()),
                ('sent_at', models.DateTimeField(blank=True, null=True)),
                ('is_sent', models.BooleanField(default=False)),
                ('recipients_count', models.IntegerField(default=0)),
                ('successfully_sent', models.IntegerField(default=0)),
                ('recipient_user_ids', models.JSONField(blank=True, default=list)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('deadline', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='student.resultsubmissiondeadline')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='StudentProgressTracker',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('completed_credits', models.IntegerField(default=0)),
                ('credits_progress_percentage', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('expected_graduation_year', models.IntegerField(blank=True, null=True)),
                ('is_eligible_for_graduation', models.BooleanField(default=False)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('completed_courses', models.ManyToManyField(blank=True, related_name='students_completed', to='student.module')),
                ('program_requirement', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='student.programrequirement')),
                ('remaining_courses', models.ManyToManyField(blank=True, related_name='students_remaining', to='student.module')),
                ('student', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='progress_tracker', to='student.student')),
            ],
        ),
        migrations.CreateModel(
            name='StudentProgression',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('enrollment_academic_year', models.CharField(max_length=20)),
                ('current_curriculum_semester', models.IntegerField(default=1)),
                ('expected_graduation_year', models.IntegerField(blank=True, null=True)),
                ('actual_graduation_year', models.IntegerField(blank=True, null=True)),
                ('is_on_track', models.BooleanField(default=True)),
                ('off_track_reason', models.CharField(blank=True, max_length=200)),
                ('has_graduated', models.BooleanField(default=False)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('curriculum', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='student.programcurriculum')),
                ('student', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='progression', to='student.student')),
            ],
        ),
        migrations.CreateModel(
            name='StudentNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('subject', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('channel', models.CharField(choices=[('email', 'Email'), ('sms', 'SMS'), ('both', 'Both Email & SMS')], default='email', max_length=20)),
                ('is_sent', models.BooleanField(default=False)),
                ('sent_date', models.DateTimeField(blank=True, null=True)),
                ('is_read', models.BooleanField(default=False)),
                ('read_date', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to='student.student')),
                ('template', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='student.notificationtemplate')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ScheduledNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('recipient_type', models.CharField(choices=[('all', 'All Students'), ('program', 'Program'), ('custom', 'Custom List')], default='all', max_length=20)),
                ('channel', models.CharField(choices=[('email', 'Email'), ('sms', 'SMS'), ('both', 'Both')], default='email', max_length=20)),
                ('scheduled_date', models.DateTimeField()),
                ('is_sent', models.BooleanField(default=False)),
                ('sent_date', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('recipient_program', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='student.program')),
                ('recipient_students', models.ManyToManyField(blank=True, to='student.student')),
            ],
            options={
                'ordering': ['-scheduled_date'],
            },
        ),
        migrations.CreateModel(
            name='SavedSearch',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('search_name', models.CharField(max_length=100)),
                ('description', models.TextField(blank=True)),
                ('search_params', models.JSONField(default=dict)),
                ('is_public', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('last_used', models.DateTimeField(blank=True, null=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='saved_searches', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-last_used', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PerformanceImprovementPlan',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('plan_date', models.DateTimeField(auto_now_add=True)),
                ('objectives', models.TextField()),
                ('actions', models.TextField()),
                ('support_provided', models.TextField()),
                ('review_date', models.DateField()),
                ('status', models.CharField(choices=[('active', 'Active'), ('completed', 'Completed'), ('unsuccessful', 'Unsuccessful')], default='active', max_length=20)),
                ('created_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('probation', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='improvement_plans', to='student.academicprobation')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='improvement_plans', to='student.student')),
            ],
            options={
                'ordering': ['-plan_date'],
            },
        ),
        migrations.CreateModel(
            name='ParentGuardian',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('first_name', models.CharField(max_length=100)),
                ('last_name', models.CharField(max_length=100)),
                ('email', models.EmailField(max_length=254)),
                ('phone', models.CharField(max_length=20)),
                ('relationship', models.CharField(choices=[('parent', 'Parent'), ('guardian', 'Guardian'), ('sponsor', 'Sponsor')], max_length=20)),
                ('can_view_results', models.BooleanField(default=True)),
                ('can_view_attendance', models.BooleanField(default=True)),
                ('can_receive_alerts', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='guardians', to='student.student')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='NotificationLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('subject', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('delivery_status', models.CharField(choices=[('pending', 'Pending'), ('sent', 'Sent'), ('failed', 'Failed'), ('bounced', 'Bounced')], default='pending', max_length=20)),
                ('delivery_method', models.CharField(choices=[('email', 'Email'), ('sms', 'SMS'), ('in_app', 'In-App')], max_length=20)),
                ('sent_at', models.DateTimeField(blank=True, null=True)),
                ('error_message', models.TextField(blank=True)),
                ('retry_count', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('batch_notification', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='individual_logs', to='student.submissionstatusnotification')),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='submission_notification_logs', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='LecturerResultReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('semester', models.CharField(max_length=20)),
                ('academic_year', models.CharField(max_length=20)),
                ('report_title', models.CharField(max_length=200)),
                ('report_content', models.TextField(help_text='Detailed report about unsatisfactory results')),
                ('severity_level', models.CharField(choices=[('low', 'Low - Minor concerns'), ('medium', 'Medium - Moderate issues'), ('high', 'High - Serious performance issues')], default='medium', max_length=20)),
                ('students_with_issues', models.IntegerField(default=0, help_text='Number of students with unsatisfactory results')),
                ('average_score', models.DecimalField(decimal_places=2, help_text='Class average score', max_digits=5)),
                ('pass_rate', models.DecimalField(decimal_places=2, help_text='Percentage of passing students', max_digits=5)),
                ('recommended_actions', models.TextField(blank=True, help_text='Suggested interventions or actions')),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('submitted', 'Submitted'), ('reviewed', 'Reviewed by HOD'), ('approved', 'Approved'), ('rejected', 'Rejected')], default='draft', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('submitted_at', models.DateTimeField(blank=True, null=True)),
                ('reviewed_at', models.DateTimeField(blank=True, null=True)),
                ('reviewer_comments', models.TextField(blank=True)),
                ('affected_students', models.JSONField(blank=True, default=list, help_text='List of student IDs with issues')),
                ('lecturer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='result_reports', to='lecturer.lecturer')),
                ('module', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='lecturer_reports', to='student.module')),
                ('reviewed_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='reviewed_lecturer_reports', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Lecturer Result Report',
                'verbose_name_plural': 'Lecturer Result Reports',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='InterventionHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('intervention_date', models.DateTimeField(auto_now_add=True)),
                ('intervention_type', models.CharField(choices=[('tutoring', 'Tutoring Session'), ('counseling', 'Academic Counseling'), ('meeting', 'Advisor Meeting'), ('workshop', 'Study Skills Workshop'), ('support', 'Academic Support')], max_length=30)),
                ('description', models.TextField()),
                ('outcome', models.TextField(blank=True)),
                ('follow_up_date', models.DateField(blank=True, null=True)),
                ('follow_up_completed', models.BooleanField(default=False)),
                ('provider', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='interventions', to='student.student')),
            ],
            options={
                'ordering': ['-intervention_date'],
            },
        ),
        migrations.CreateModel(
            name='GuardianAlert',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('alert_type', models.CharField(choices=[('grade_warning', 'Grade Warning'), ('poor_attendance', 'Poor Attendance'), ('failing_course', 'Failing Course'), ('achievement', 'Academic Achievement')], max_length=20)),
                ('subject', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('is_sent', models.BooleanField(default=False)),
                ('sent_date', models.DateTimeField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('guardian', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='alerts', to='student.parentguardian')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='GraduationEligibility',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_eligible', models.BooleanField(default=False)),
                ('credits_completed', models.IntegerField(default=0)),
                ('credits_required', models.IntegerField()),
                ('gpa_requirement_met', models.BooleanField(default=False)),
                ('current_gpa', models.DecimalField(decimal_places=2, default=0, max_digits=3)),
                ('required_gpa', models.DecimalField(decimal_places=2, default=2.0, max_digits=3)),
                ('all_required_courses_completed', models.BooleanField(default=False)),
                ('eligibility_checked_date', models.DateTimeField(auto_now=True)),
                ('outstanding_courses', models.ManyToManyField(blank=True, related_name='students_needing_completion', to='student.module')),
                ('student', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='graduation_eligibility', to='student.student')),
            ],
        ),
        migrations.CreateModel(
            name='GradeSubmissionDeadline',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=20)),
                ('semester', models.CharField(max_length=10)),
                ('deadline_type', models.CharField(choices=[('midterm', 'Midterm'), ('final', 'Final')], max_length=20)),
                ('deadline_date', models.DateField()),
                ('reminder_days_before', models.IntegerField(default=7)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'unique_together': {('academic_year', 'semester', 'deadline_type')},
            },
        ),
        migrations.CreateModel(
            name='GradeAuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('change_type', models.CharField(choices=[('created', 'Created'), ('updated', 'Updated'), ('deleted', 'Deleted'), ('published', 'Published'), ('unpublished', 'Unpublished')], max_length=20)),
                ('old_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('new_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('old_grade', models.CharField(blank=True, max_length=5)),
                ('new_grade', models.CharField(blank=True, max_length=5)),
                ('reason', models.TextField(blank=True)),
                ('changed_date', models.DateTimeField(auto_now_add=True)),
                ('changed_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('result', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='audit_logs', to='student.result')),
            ],
            options={
                'ordering': ['-changed_date'],
            },
        ),
        migrations.CreateModel(
            name='EarlyWarningAlert',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('alert_type', models.CharField(choices=[('low_score', 'Low Score'), ('failing', 'Failing'), ('low_attendance', 'Low Attendance')], max_length=20)),
                ('trigger_value', models.DecimalField(decimal_places=2, max_digits=5)),
                ('threshold', models.DecimalField(decimal_places=2, max_digits=5)),
                ('alert_date', models.DateTimeField(auto_now_add=True)),
                ('is_acknowledged', models.BooleanField(default=False)),
                ('acknowledged_date', models.DateTimeField(blank=True, null=True)),
                ('related_module', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='student.module')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='early_warnings', to='student.student')),
            ],
            options={
                'ordering': ['-alert_date'],
            },
        ),
        migrations.CreateModel(
            name='DegreeRequirement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('minimum_gpa', models.DecimalField(decimal_places=2, default=2.0, max_digits=3)),
                ('minimum_credits', models.IntegerField()),
                ('required_major_credits', models.IntegerField(default=0)),
                ('required_elective_credits', models.IntegerField(default=0)),
                ('required_general_ed_credits', models.IntegerField(default=0)),
                ('max_years_to_complete', models.IntegerField(default=4)),
                ('description', models.TextField(blank=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('program', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='degree_requirement', to='student.program')),
            ],
        ),
        migrations.CreateModel(
            name='DataIntegrityReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('report_date', models.DateTimeField(auto_now_add=True)),
                ('issue_level', models.CharField(choices=[('warning', 'Warning'), ('error', 'Error'), ('critical', 'Critical')], max_length=20)),
                ('issue_type', models.CharField(max_length=100)),
                ('description', models.TextField()),
                ('affected_records', models.IntegerField(default=0)),
                ('suggested_action', models.TextField(blank=True)),
                ('is_resolved', models.BooleanField(default=False)),
                ('resolved_date', models.DateTimeField(blank=True, null=True)),
                ('resolved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-report_date'],
            },
        ),
        migrations.CreateModel(
            name='CumulativeGPA',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('overall_gpa', models.DecimalField(decimal_places=2, default=0, max_digits=3)),
                ('total_credits', models.IntegerField(default=0)),
                ('total_credit_points', models.DecimalField(decimal_places=2, default=0, max_digits=8)),
                ('academic_standing', models.CharField(choices=[('excellent', 'Excellent Standing (3.5+)'), ('good', 'Good Standing (3.0-3.49)'), ('satisfactory', 'Satisfactory Standing (2.0-2.99)'), ('probation', 'Academic Probation (1.0-1.99)'), ('poor', 'Poor Standing (<1.0)')], default='good', max_length=20)),
                ('on_deans_list', models.BooleanField(default=False)),
                ('deans_list_semesters', models.JSONField(default=list)),
                ('last_recalculated', models.DateTimeField(auto_now=True)),
                ('grading_scale', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='student.gradingscale')),
                ('student', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='cumulative_gpa', to='student.student')),
            ],
        ),
        migrations.CreateModel(
            name='ClassPerformanceMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=20)),
                ('semester', models.CharField(max_length=10)),
                ('class_average', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('highest_score', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('lowest_score', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('std_deviation', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('pass_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('total_students_enrolled', models.IntegerField(default=0)),
                ('total_students_passed', models.IntegerField(default=0)),
                ('total_students_failed', models.IntegerField(default=0)),
                ('last_updated', models.DateTimeField(auto_now=True)),
                ('module', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='performance_metrics', to='student.module')),
            ],
        ),
        migrations.CreateModel(
            name='Assignment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField()),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('due_date', models.DateTimeField()),
                ('max_score', models.DecimalField(decimal_places=2, default=100, max_digits=5)),
                ('status', models.CharField(choices=[('open', 'Open'), ('closed', 'Closed'), ('graded', 'Graded')], default='open', max_length=20)),
                ('course_offering', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assignments', to='student.courseoffering')),
            ],
            options={
                'ordering': ['-due_date'],
            },
        ),
        migrations.CreateModel(
            name='APIRateLimit',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('requests_per_hour', models.IntegerField(default=100)),
                ('requests_per_day', models.IntegerField(default=1000)),
                ('current_hour_requests', models.IntegerField(default=0)),
                ('current_day_requests', models.IntegerField(default=0)),
                ('hour_reset_time', models.DateTimeField(auto_now=True)),
                ('day_reset_time', models.DateTimeField(auto_now=True)),
                ('is_blocked', models.BooleanField(default=False)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='api_rate_limit', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='AnalyticsReport',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('report_type', models.CharField(choices=[('grade_distribution', 'Grade Distribution'), ('performance_trend', 'Performance Trend'), ('risk_analysis', 'Risk Analysis'), ('department_summary', 'Department Summary'), ('program_comparison', 'Program Comparison')], max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('academic_year', models.CharField(max_length=20)),
                ('semester', models.CharField(blank=True, max_length=10, null=True)),
                ('data', models.JSONField(blank=True, default=dict)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('file_format', models.CharField(choices=[('pdf', 'PDF'), ('excel', 'Excel'), ('csv', 'CSV')], default='pdf', max_length=10)),
                ('department', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='student.department')),
                ('generated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('program', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='student.program')),
            ],
            options={
                'ordering': ['-generated_at'],
            },
        ),
        migrations.CreateModel(
            name='AdvisorNote',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('note_date', models.DateTimeField(auto_now_add=True)),
                ('note_type', models.CharField(choices=[('general', 'General'), ('warning', 'Warning'), ('commendation', 'Commendation'), ('intervention', 'Intervention')], default='general', max_length=20)),
                ('content', models.TextField()),
                ('advisor', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='advisor_notes', to='student.student')),
            ],
            options={
                'ordering': ['-note_date'],
            },
        ),
        migrations.CreateModel(
            name='AcademicCalendarEvent',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('event_type', models.CharField(choices=[('registration', 'Registration'), ('exam', 'Exam Period'), ('holiday', 'Holiday'), ('deadline', 'Deadline'), ('event', 'Event'), ('recess', 'Recess')], max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('is_holiday', models.BooleanField(default=False)),
                ('affects_classes', models.BooleanField(default=False)),
                ('semester', models.CharField(blank=True, max_length=10)),
                ('calendar', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='events', to='student.academiccalendar')),
            ],
            options={
                'ordering': ['start_date'],
            },
        ),
        migrations.CreateModel(
            name='StudentEnrollment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('enrollment_date', models.DateTimeField(auto_now_add=True)),
                ('status', models.CharField(choices=[('enrolled', 'Enrolled'), ('dropped', 'Dropped'), ('completed', 'Completed')], default='enrolled', max_length=20)),
                ('course_offering', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='student_enrollments', to='student.courseoffering')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='enrollments', to='student.student')),
            ],
            options={
                'unique_together': {('student', 'course_offering')},
            },
        ),
        migrations.CreateModel(
            name='SemesterConfiguration',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('semester', models.CharField(max_length=10)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('classes_start', models.DateField()),
                ('classes_end', models.DateField()),
                ('exam_start', models.DateField()),
                ('exam_end', models.DateField()),
                ('is_active', models.BooleanField(default=False)),
                ('calendar', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='semesters', to='student.academiccalendar')),
            ],
            options={
                'unique_together': {('calendar', 'semester')},
            },
        ),
        migrations.CreateModel(
            name='RetakeCourse',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('original_academic_year', models.CharField(max_length=20)),
                ('original_semester', models.CharField(max_length=10)),
                ('original_grade', models.CharField(max_length=5)),
                ('original_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('retake_academic_year', models.CharField(max_length=20)),
                ('retake_semester', models.CharField(max_length=10)),
                ('retake_grade', models.CharField(blank=True, max_length=5)),
                ('retake_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('reason_for_retake', models.CharField(choices=[('improve_grade', 'Improve Grade'), ('failed', 'Failed'), ('other', 'Other')], max_length=100)),
                ('module', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='student.module')),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='retaken_courses', to='student.student')),
            ],
            options={
                'unique_together': {('student', 'module', 'retake_academic_year', 'retake_semester')},
            },
        ),
        migrations.CreateModel(
            name='GradeDistributionSnapshot',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('academic_year', models.CharField(max_length=20)),
                ('semester', models.CharField(max_length=10)),
                ('grade_a_count', models.IntegerField(default=0)),
                ('grade_b_count', models.IntegerField(default=0)),
                ('grade_c_count', models.IntegerField(default=0)),
                ('grade_d_count', models.IntegerField(default=0)),
                ('grade_f_count', models.IntegerField(default=0)),
                ('average_score', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('average_gpa', models.DecimalField(decimal_places=2, default=0, max_digits=3)),
                ('total_students', models.IntegerField(default=0)),
                ('pass_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='grade_distributions', to='student.program')),
            ],
            options={
                'unique_together': {('academic_year', 'semester', 'program')},
            },
        ),
        migrations.CreateModel(
            name='FacultyResultOverview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('semester', models.CharField(max_length=20)),
                ('academic_year', models.CharField(max_length=20)),
                ('total_students', models.IntegerField(default=0)),
                ('total_modules', models.IntegerField(default=0)),
                ('total_results', models.IntegerField(default=0)),
                ('average_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('overall_gpa', models.DecimalField(decimal_places=2, max_digits=3)),
                ('overall_pass_rate', models.DecimalField(decimal_places=2, help_text='Percentage', max_digits=5)),
                ('grade_a_count', models.IntegerField(default=0)),
                ('grade_b_count', models.IntegerField(default=0)),
                ('grade_c_count', models.IntegerField(default=0)),
                ('grade_d_count', models.IntegerField(default=0)),
                ('grade_f_count', models.IntegerField(default=0)),
                ('department_stats', models.JSONField(blank=True, default=dict, help_text='Department-wise performance data')),
                ('key_findings', models.TextField(blank=True, help_text='Summary of key findings')),
                ('improvement_areas', models.TextField(blank=True, help_text='Areas needing improvement')),
                ('best_performing_departments', models.TextField(blank=True)),
                ('worst_performing_departments', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('published', 'Published'), ('archived', 'Archived')], default='draft', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('published_at', models.DateTimeField(blank=True, null=True)),
                ('dean', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='result_overviews', to='admin_hierarchy.deanoffaculty')),
                ('faculty', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='result_overviews', to='student.faculty')),
            ],
            options={
                'verbose_name': 'Faculty Result Overview',
                'verbose_name_plural': 'Faculty Result Overviews',
                'ordering': ['-created_at'],
                'unique_together': {('faculty', 'semester', 'academic_year')},
            },
        ),
        migrations.CreateModel(
            name='DepartmentResultOverview',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('semester', models.CharField(max_length=20)),
                ('academic_year', models.CharField(max_length=20)),
                ('total_students', models.IntegerField(default=0)),
                ('total_modules', models.IntegerField(default=0)),
                ('total_results', models.IntegerField(default=0)),
                ('average_score', models.DecimalField(decimal_places=2, max_digits=5)),
                ('overall_gpa', models.DecimalField(decimal_places=2, max_digits=3)),
                ('overall_pass_rate', models.DecimalField(decimal_places=2, max_digits=5)),
                ('grade_a_count', models.IntegerField(default=0)),
                ('grade_b_count', models.IntegerField(default=0)),
                ('grade_c_count', models.IntegerField(default=0)),
                ('grade_d_count', models.IntegerField(default=0)),
                ('grade_f_count', models.IntegerField(default=0)),
                ('module_stats', models.JSONField(blank=True, default=dict)),
                ('key_findings', models.TextField(blank=True)),
                ('improvement_areas', models.TextField(blank=True)),
                ('best_performing_modules', models.TextField(blank=True)),
                ('worst_performing_modules', models.TextField(blank=True)),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('published', 'Published'), ('archived', 'Archived')], default='draft', max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('published_at', models.DateTimeField(blank=True, null=True)),
                ('department', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='result_overviews', to='student.department')),
                ('hod', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='result_overviews', to='admin_hierarchy.headofdepartment')),
            ],
            options={
                'verbose_name': 'Department Result Overview',
                'verbose_name_plural': 'Department Result Overviews',
                'ordering': ['-created_at'],
                'unique_together': {('department', 'semester', 'academic_year')},
            },
        ),
        migrations.CreateModel(
            name='CurriculumCourse',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(choices=[('required', 'Required'), ('elective', 'Elective'), ('optional', 'Optional')], max_length=20)),
                ('semester', models.IntegerField()),
                ('curriculum', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='courses', to='student.programcurriculum')),
                ('module', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='student.module')),
            ],
            options={
                'unique_together': {('curriculum', 'module')},
            },
        ),
        migrations.CreateModel(
            name='CoursePrerequisite',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('minimum_grade', models.CharField(default='D', max_length=5)),
                ('minimum_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='prerequisites', to='student.module')),
                ('prerequisite_course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='is_prerequisite_for', to='student.module')),
            ],
            options={
                'unique_together': {('course', 'prerequisite_course')},
            },
        ),
        migrations.CreateModel(
            name='CourseLearningOutcome',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('outcome_description', models.TextField()),
                ('outcome_number', models.IntegerField()),
                ('module', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='learning_outcomes', to='student.module')),
            ],
            options={
                'unique_together': {('module', 'outcome_number')},
            },
        ),
        migrations.CreateModel(
            name='CohortAnalysis',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('cohort_name', models.CharField(max_length=100)),
                ('enrollment_academic_year', models.CharField(max_length=20)),
                ('cohort_size', models.IntegerField(default=0)),
                ('average_gpa', models.DecimalField(decimal_places=2, default=0, max_digits=3)),
                ('graduation_rate', models.DecimalField(decimal_places=2, default=0, max_digits=5)),
                ('average_time_to_graduation', models.DecimalField(decimal_places=1, default=0, max_digits=3)),
                ('dropout_count', models.IntegerField(default=0)),
                ('analysis_date', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('statistics', models.JSONField(blank=True, default=dict)),
                ('program', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='cohort_analyses', to='student.program')),
            ],
            options={
                'unique_together': {('cohort_name', 'program', 'enrollment_academic_year')},
            },
        ),
        migrations.CreateModel(
            name='ClassAttendance',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('attendance_date', models.DateField()),
                ('is_present', models.BooleanField(default=True)),
                ('course_offering', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to='student.courseoffering')),
                ('marked_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attendance_records', to='student.student')),
            ],
            options={
                'unique_together': {('course_offering', 'student', 'attendance_date')},
            },
        ),
        migrations.CreateModel(
            name='AssignmentSubmission',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('submission_file', models.FileField(upload_to='assignments/')),
                ('submission_date', models.DateTimeField(auto_now_add=True)),
                ('is_late', models.BooleanField(default=False)),
                ('score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('feedback', models.TextField(blank=True)),
                ('graded_date', models.DateTimeField(blank=True, null=True)),
                ('assignment', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='submissions', to='student.assignment')),
                ('graded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
                ('student', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='assignment_submissions', to='student.student')),
            ],
            options={
                'unique_together': {('assignment', 'student')},
            },
        ),
    ]
